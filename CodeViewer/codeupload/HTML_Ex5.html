<!DOCTYPE html>                                                                                                                                    
<html lang="en">                                                                                                                                      
<head>                                                                                                                                              
	<meta charset="utf-8">                                                                                                                            
	<script type="text/javascript">                                                                                                                   
	//Declaration of globals                                                                                                                          
	var acanvas,context;                                                                                                                              
                                                                                                                                                       
	//Initializations                                                                                                                                 
	function init()                                                                                                                                   
	{                                                                                                                                                 
        acanvas=document.getElementById("a");                                                                                                          
        context=acanvas.getContext("2d");                                                                                                              
        acanvas.addEventListener('mousemove', mouseMove, false); //Call the mouseMove function when the mouse is moved over the canvas element         
        acanvas.addEventListener('mousedown', mouseDown, false); //Call the mouseDown function when a mouse button is pressed down on the canvas element
        acanvas.addEventListener('contextmenu', function(event){event.preventDefault();}, false); //Prevent the context menu to be displayed when right mouse button is clicked on the canvas
     }                                                                                                                                                 
                                                                                                                                                       
     //This function is called by the onmousemove event for the canvas element                                                                         
     function mouseMove(event){                                                                                                                        
		//Find the position of the canvas element                                                                                                      
        var positionOfTheCanvasElement=findPos(event.target); //event.target is the canvas                                                             
        //Calculate mouse coordinates                                                                                                                  
        var x=event.pageX-positionOfTheCanvasElement.x;                                                                                                
        var y=event.pageY-positionOfTheCanvasElement.y;                                                                                                
        //Draw a red circle at the mouse coordinates                                                                                                   
        drawDot(x,y,5,"#f00");                                                                                                                         
     }                                                                                                                                                 
                                                                                                                                                       
     //This function is called when a mouse button is pressed down on the canvas element                                                               
     function mouseDown(event){                                                                                                                        
        //Find the position of the canvas element                                                                                                      
        var positionOfTheCanvasElement=findPos(event.target); //event.target is the canvas                                                             
        //Calculate mouse coordinates                                                                                                                  
        var x=event.pageX-positionOfTheCanvasElement.x;                                                                                                
        var y=event.pageY-positionOfTheCanvasElement.y;                                                                                                
        //Check which mouse button was pressed down                                                                                                    
        if(event.which==3)          //Right mouse button pressed down                                                                                  
           drawDot(x,y,15,"#0f0");  //Draw a green circle at the mouse coordinates                                                                     
        else                        //Left or middle mouse button pressed down                                                                         
           drawDot(x,y,10,"#00f");  //Draw a blue circle at the mouse coordinates                                                                      
     }                                                                                                                                                 
                                                                                                                                                       
     //Draws a filled circle at the given position                                                                                                     
     function drawDot(x,y,size,color){                                                                                                                 
        context.fillStyle = color;                                                                                                                     
        context.beginPath();                                                                                                                           
        context.arc(x, y, size, 0, Math.PI*2, false);                                                                                                  
        context.closePath();                                                                                                                           
        context.fill();                                                                                                                                
     }                                                                                                                                                 
                                                                                                                                                       
    //Finds the position of any DOM element in the document by recursion - should work in most modern browsers                                        
    function findPos(obj) {                                                                                                                           
        var curleft = curtop = 0;                                                                                                                      
        if (obj.offsetParent) {                                                                                                                        
			curleft = obj.offsetLeft                                                                                                                    
			curtop = obj.offsetTop                                                                                                                      
			while (obj = obj.offsetParent) {                                                                                                            
				curleft += obj.offsetLeft                                                                                                                
				curtop += obj.offsetTop                                                                                                                  
			}                                                                                                                                           
        }                                                                                                                                              
        return {x:curleft, y:curtop} //Returns the position of the element as an object                                                                
    }                                                                                                                                                 
    </script>                                                                                                                                         
	</head>                                                                                                                                             
                                                                                                                                                       
	<body onload='init();'>                                                                                                                             
		<div style="float:left;width:380px;height:440px;padding:10px;margin:5px;background-color:#deface;">                                               
			<h2>Lorem ipsum...</h2>                                                                                                                        
			<p><strong>Move the mouse pointer over the canvas to the right</strong></p>                                                                    
			<p><strong>Try clicking both left, middle and right mouse buttons</strong></p>                                                                 
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi pretium vulputate vestibulum.                                                
			Aliquam erat volutpat. Fusce non est in purus porttitor aliquet. Nulla at urna eget nibh sodales                                              
			ultricies sed ac quam. Donec lacinia sem quis orci laoreet volutpat pulvinar sapien dignissim.                                                
			Fusce a tortor vel enim gravida tempus. Integer varius scelerisque erat, non malesuada sapien                                                 
			venenatis a. Aenean egestas mattis sapien. Suspendisse dui lectus, cursus et porta eu, posuere                                                
			vitae augue. Sed ac leo nulla, eu feugiat mauris. Proin vel quam metus, non molestie felis.                                                   
			</p>                                                                                                                                           
		</div>                                                                                                                                            
		<canvas id="a" width="398" height="458" style="border:1px solid #000;float:left;margin:5px;"></canvas>                                            
	</body>                                                                                                                                             
</html>
